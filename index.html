<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Creation Interface</title>
    <!-- Use CDN for development to ensure styles work -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles/main.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Stolzl Font (using Inter as fallback since Stolzl is premium) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        // Configure Tailwind for dark mode
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        dark: {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e1',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                        }
                    }
                }
            }
        }
    </script>


</head>
<body class="bg-gray-50">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div id="sidebar" class="w-64 bg-white border-r border-gray-200 h-screen flex flex-col">
            <!-- Header -->
            <div class="p-4 border-b border-gray-200 flex-shrink-0">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-2">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <img src="assets/logo.svg" alt="Logo" class="w-full h-full" onerror="this.style.display='none'">
                        </div>
                        <span class="sidebar-title">Dashboard Creation</span>
                    </div>
                    <button id="collapseSidebarBtn" class="text-gray-600 hover:text-gray-900 transition-colors">
                        <i class="fas fa-bars w-4 h-4 transition-transform duration-300 ease-in-out"></i>
                    </button>
                </div>

                <!-- Search -->
                <div class="relative">
                    <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm"></i>
                    <input
                        type="text"
                        placeholder="Search"
                        class="w-full pl-10 pr-8 py-2 text-sm border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                    />
                    <span class="absolute right-3 top-1/2 transform -translate-y-1/2 text-xs text-gray-400">âŒ˜ K</span>
                </div>
            </div>

            <!-- Scrollable Navigation Content and Footer -->
            <div class="flex-1 overflow-y-auto">
                <div class="p-4">
                    <!-- Navigation -->
                    <nav class="space-y-1 mb-6">
                        <button data-screen="dashboard" class="nav-btn w-full flex items-center gap-3 px-3 py-2 rounded-md transition-colors bg-gray-100 text-gray-900">
                            <img src="assets/home_icon.svg" alt="Home" class="w-4 h-4" onerror="this.outerHTML='<i class=&quot;fas fa-home w-4 h-4&quot;></i>'">
                            <span class="sidebar-text">Home</span>
                        </button>
                        <button data-screen="members" class="nav-btn w-full flex items-center gap-3 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-md transition-colors">
                            <img src="assets/members_icon.svg" alt="Members" class="w-4 h-4" onerror="this.outerHTML='<i class=&quot;fas fa-users w-4 h-4&quot;></i>'">
                            <span class="sidebar-text">Members</span>
                        </button>
                        <button data-screen="settings" class="nav-btn w-full flex items-center gap-3 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-md transition-colors">
                            <img src="assets/invite_members.svg" alt="Invite" class="w-4 h-4" onerror="this.outerHTML='<i class=&quot;fas fa-user-plus w-4 h-4&quot;></i>'">
                            <span class="sidebar-text">Invite others</span>
                        </button>
                        <button data-screen="analytics" class="nav-btn w-full flex items-center gap-3 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-md transition-colors">
                            <img src="assets/trash-bin.svg" alt="Trash" class="w-4 h-4" onerror="this.outerHTML='<i class=&quot;fas fa-trash w-4 h-4&quot;></i>'">
                            <span class="sidebar-text">Trash</span>
                        </button>
                    </nav>

                    <!-- Favorites -->
                    <div class="mb-6">
                        <h3 class="sidebar-section-title mb-2">Favorites</h3>
                        <p class="sidebar-description">
                            Hover over any widget and click on the star to add it here
                        </p>
                    </div>

                    <!-- Transaction Management -->
                    <div class="mb-6">
                        <h3 class="sidebar-section-title mb-2">Transaction Monitoring</h3>
                        <p class="sidebar-description mb-3">
                            Transaction Monitoring of Channels.
                        </p>
                        <!-- Add clickable button -->
                        <button data-screen="transaction" class="nav-btn w-full flex items-center gap-3 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-md transition-colors">
                            <i class="fas fa-chart-line w-4 h-4"></i>
                            <span class="sidebar-text">View Monitoring</span>
                        </button>
                    </div>

                   


                    <!-- Widget Options -->
                    <div id="widgetOptions" class="hidden mb-6">
                        <h3 class="sidebar-section-title mb-3">Widget Options</h3>
                        <div class="space-y-1">
                            <button class="widget-option w-full flex items-center justify-between px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-md transition-colors group" data-type="text-header">
                                <div class="flex items-center gap-3">
                                    <i class="fas fa-heading w-4 h-4"></i>
                                    <span class="sidebar-text">Text Header</span>
                                </div>
                                <i class="fas fa-plus w-4 opacity-0 group-hover:opacity-100 transition-opacity"></i>
                            </button>
                            <button class="widget-option w-full flex items-center justify-between px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-md transition-colors group" data-type="table">
                                <div class="flex items-center gap-3">
                                    <i class="fas fa-table w-4 h-4"></i>
                                    <span class="sidebar-text">Table</span>
                                </div>
                                <i class="fas fa-plus w-4 opacity-0 group-hover:opacity-100 transition-opacity"></i>
                            </button>
                            <button class="widget-option w-full flex items-center justify-between px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-md transition-colors group" data-type="donut">
                                <div class="flex items-center gap-3">
                                    <img src="assets/donut-chart.svg" alt="Donut Chart" class="w-4 h-4" onerror="this.outerHTML='<i class=&quot;fas fa-chart-donut w-4 h-4&quot;></i>'">
                                    <span class="sidebar-text">Donut chart</span>
                                </div>
                                <i class="fas fa-plus w-4 opacity-0 group-hover:opacity-100 transition-opacity"></i>
                            </button>
                            <button class="widget-option w-full flex items-center justify-between px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-md transition-colors group" data-type="bar">
                                <div class="flex items-center gap-3">
                                    <img src="assets/bar-chart.svg" alt="Bar Chart" class="w-4 h-4" onerror="this.outerHTML='<i class=&quot;fas fa-chart-bar w-4 h-4&quot;></i>'">
                                    <span class="sidebar-text">Bar chart</span>
                                </div>
                                <i class="fas fa-plus w-4 opacity-0 group-hover:opacity-100 transition-opacity"></i>
                            </button>
                            <button class="widget-option w-full flex items-center justify-between px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-md transition-colors group" data-type="histogram">
                                <div class="flex items-center gap-3">
                                    <img src="assets/histogram-chart.svg" alt="Histogram" class="w-4 h-4" onerror="this.outerHTML='<i class=&quot;fas fa-chart-area w-4 h-4&quot;></i>'">
                                    <span class="sidebar-text">Histogram</span>
                                </div>
                                <i class="fas fa-plus w-4 opacity-0 group-hover:opacity-100 transition-opacity"></i>
                            </button>
                            <button class="widget-option w-full flex items-center justify-between px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-md transition-colors group" data-type="single-value">
                                <div class="flex items-center gap-3">
                                    <img src="assets/single_line-chart.svg" alt="Single Value" class="w-4 h-4" onerror="this.outerHTML='<i class=&quot;fas fa-chart-line w-4 h-4&quot;></i>'">
                                    <span class="sidebar-text">Single Value Chart</span>
                                </div>
                                <i class="fas fa-plus w-4 opacity-0 group-hover:opacity-100 transition-opacity"></i>
                            </button>
                            <button class="widget-option w-full flex items-center justify-between px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-md transition-colors group" data-type="line">
                                <div class="flex items-center gap-3">
                                    <img src="assets/line-chart.svg" alt="Line Chart" class="w-4 h-4" onerror="this.outerHTML='<i class=&quot;fas fa-chart-line w-4 h-4&quot;></i>'">
                                    <span class="sidebar-text">Line Chart</span>
                                </div>
                                <i class="fas fa-plus w-4 opacity-0 group-hover:opacity-100 transition-opacity"></i>
                            </button>
                            <button class="widget-option w-full flex items-center justify-between px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-md transition-colors group" data-type="pie">
                                <div class="flex items-center gap-3">
                                    <img src="assets/pie_chart.svg" alt="Pie Chart" class="w-4 h-4" onerror="this.outerHTML='<i class=&quot;fas fa-chart-pie w-4 h-4&quot;></i>'">
                                    <span class="sidebar-text">Pie Chart</span>
                                </div>
                                <i class="fas fa-plus w-4 opacity-0 group-hover:opacity-100 transition-opacity"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Table Creation -->
                    <div class="mb-6">
                        <h3 class="sidebar-section-title mb-3">Table Creation</h3>
                        <button class="w-full flex items-center justify-between px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-md transition-colors group">
                            <div class="flex items-center gap-3">
                                <i class="fas fa-bolt w-4 h-4"></i>
                                <span class="sidebar-text">Create new table</span>
                            </div>
                            <i class="fas fa-plus w-4 opacity-0 group-hover:opacity-100 transition-opacity"></i>
                        </button>
                    </div>

                    <!-- Automation -->
                    <div class="mb-6">
                        <h3 class="sidebar-section-title mb-3">Automation</h3>
                        <button class="w-full flex items-center gap-3 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-md transition-colors">
                            <i class="fas fa-bolt w-4 h-4"></i>
                            <span class="sidebar-text">Work Flow</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="p-4 border-t border-gray-200 flex-shrink-0">
                <div class="flex items-center gap-2">
                    <div class="w-6 h-6 flex items-center justify-center">
                        <img src="assets/logo.svg" alt="Logo" class="w-full h-full" onerror="this.style.display='none'">
                    </div>
                    <span class="text-sm font-medium text-gray-900">edge</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 bg-gray-50 flex flex-col">
            <!-- Dashboard Home Screen -->
            <div id="dashboardScreen" class="screen flex-1">
                <div class="bg-white border-b border-gray-200 px-8 py-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <h1 class="main-title">Custom Dashboard</h1>
                        </div>
                        <div class="flex items-center gap-3">
                            <button id="importDashboardBtn" class="import-dashboard-btn flex items-center gap-2 px-4 py-2 text-sm bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors">
                                <i class="fas fa-upload w-4"></i>
                                Import Dashboard
                            </button>

                            <button id="createDashboardBtn" class="create-dashboard-btn flex items-center gap-2 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors">
                                <i class="fas fa-plus w-4"></i>
                                Create new Dashboard
                            </button>
                        </div>
                    </div>
                </div>

                <div class="p-8">
                    <div class="mb-8">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="section-title">Resources for you</h2>
                            <button id="collapseResourcesBtn" class="flex items-center gap-1 text-sm text-gray-600 hover:text-gray-900 transition-colors">
                                <span class="collapse-text">Collapse</span>
                                <i class="fas fa-chevron-down w-4 collapse-icon transition-transform"></i>
                            </button>
                        </div>

                        <div id="resourcesContent" class="transition-all duration-300 ease-in-out">
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                                <!-- Template cards will be dynamically generated -->
                                <div class="bg-gradient-to-br from-purple-600 via-purple-700 to-pink-600 rounded-lg p-6 text-white">
                                    <div class="flex items-center gap-2 mb-4">
                                        <div class="w-6 h-6 flex items-center justify-center">
                                            <img src="assets/logo.svg" alt="Logo" class="w-full h-full filter brightness-0 invert" onerror="this.style.display='none'">
                                        </div>
                                        <span class="font-semibold">edge</span>
                                    </div>
                                    <h3 class="font-medium mb-2">Instant Setup, no complex steps.</h3>
                                    <p class="text-sm opacity-90">Just click and go</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div class="mb-6">
                            <div class="section-title-container mb-6">
                                <h2 class="section-title">Recently Created</h2>

                                <!-- Filter Controls -->
                                <div class="flex items-center gap-4">
                                    <!-- Search Filter -->
                                    <div class="relative">
                                        <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm"></i>
                                        <input
                                            type="text"
                                            id="dashboardSearchFilter"
                                            placeholder="Search dashboards..."
                                            class="pl-10 pr-4 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 w-64"
                                        />
                                    </div>

                                    <!-- Status Filter -->
                                    <select id="statusFilter" class="px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                        <option value="all">All Status</option>
                                        <option value="published">Published</option>
                                        <option value="draft">Draft</option>
                                    </select>

                                    <!-- Owner Filter -->
                                    <select id="ownerFilter" class="px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                        <option value="all">All Owners</option>
                                        <option value="you">You</option>
                                        <option value="shared">Shared with me</option>
                                    </select>

                                    <!-- Date Filter -->
                                    <select id="dateFilter" class="px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                        <option value="all">All Time</option>
                                        <option value="today">Today</option>
                                        <option value="week">This Week</option>
                                        <option value="month">This Month</option>
                                        <option value="quarter">This Quarter</option>
                                    </select>

                                    <!-- Sort Options -->
                                    <select id="sortFilter" class="px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                        <option value="modified">Last Modified</option>
                                        <option value="created">Date Created</option>
                                        <option value="name">Name (A-Z)</option>
                                        <option value="name-desc">Name (Z-A)</option>
                                        <option value="widgets">Widget Count</option>
                                    </select>

                                    <!-- Show Hidden Dashboards Toggle -->
                                    <div class="flex items-center gap-2">
                                        <label for="showHiddenToggle" class="text-sm text-gray-600 cursor-pointer">Show Hidden</label>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="showHiddenToggle">
                                            <span class="slider"></span>
                                        </label>
                                    </div>

                            </div>
                            </div>

                            <!-- Filter Summary -->
                            <div id="filterSummary" class="hidden mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-2">
                                        <i class="fas fa-filter text-blue-600"></i>
                                        <span class="text-sm text-blue-800">Filters applied:</span>
                                        <div id="activeFilters" class="flex items-center gap-2"></div>
                                    </div>
                                    <button id="clearAllFiltersBtn" class="px-3 py-1 text-sm bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-md transition-colors">
                                        <i class="fas fa-times w-3 mr-1"></i>
                                        Clear All
                                    </button>
                                </div>
                            </div>

                            <!-- Results Count -->
                            <div class="flex items-center justify-between mb-4">
                                <span id="resultsCount" class="text-sm text-gray-600">Loading dashboards...</span>
                            </div>

                            <!-- Dashboards List -->
                            <div id="dashboardsList" class="space-y-4">
                                <!-- Dashboard cards will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Builder Screen -->
            <div id="builderScreen" class="screen flex-1 hidden">
                <div class="bg-white border-b border-gray-200 px-8 py-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <button id="backToHomeBtn" class="flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900 transition-colors">
                                <i class="fas fa-arrow-left w-4"></i>
                                <span>Back to Home</span>
                            </button>
                            <div class="h-4 w-px bg-gray-300"></div>

                            <!-- Editable Dashboard Name -->
                            <div class="flex items-center gap-2">
                                <input type="text"
                                       id="dashboardNameInput"
                                       class="dashboard-name-input text-lg font-medium text-gray-900 bg-transparent border-none outline-none focus:bg-white focus:border focus:border-teal-500 focus:rounded-md focus:px-2 focus:py-1 transition-all"
                                       value="Dashboard Name"
                                       placeholder="Enter dashboard name...">
                                <button id="editDashboardNameBtn" class="text-gray-400 hover:text-gray-600 transition-colors" title="Edit name">
                                    <i class="fas fa-edit w-4 h-4"></i>
                                </button>
                            </div>

                            <div class="h-4 w-px bg-gray-300"></div>
                            <div class="flex items-center gap-4">
                                <button class="flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900 transition-colors" title="Settings">
                                    <i class="fas fa-cog w-4"></i>
                                    Settings
                                </button>
                                <button class="flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900 transition-colors" title="History">
                                    <img src="assets/history_icon.svg" alt="History" class="w-4 h-4" onerror="this.outerHTML='<i class=&quot;fas fa-history w-4 h-4&quot;></i>'">
                                    History
                                </button>
                            </div>
                        </div>
                        <div class="flex items-center gap-4">
                            <div class="flex items-center gap-2">
                                <div id="selectedWidgetTitle" class="hidden flex items-center gap-2 text-sm text-gray-600">
                                    <i class="fas fa-edit w-4"></i>
                                    <span>Editing:</span>
                                    <span class="font-medium text-gray-900"></span>
                                </div>
                            </div>
                            <span class="text-sm text-gray-500">Draft</span>
                            <label class="toggle-switch">
                                <input type="checkbox">
                                <span class="slider"></span>
                            </label>
                            <span class="text-xs text-gray-400">last saved today 1:25 pm</span>
                            <div class="flex items-center gap-2">
                                <button class="run-once-btn flex items-center gap-2 px-4 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                                    <i class="fas fa-play w-4"></i>
                                    Run Once
                                </button>
                                <button class="publish-btn px-4 py-2 text-sm bg-teal-600 text-white rounded-md hover:bg-teal-700 transition-colors">
                                    Publish
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex-1 p-8 overflow-auto">
                    <div id="emptyState" class="h-full flex items-center justify-center">
                        <div class="text-center">
                            <div class="dotted-background w-64 h-48 mx-auto mb-6 flex items-center justify-center">
                                <div class="w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center">
                                    <div class="w-8 h-8 border-2 border-dashed border-gray-300 rounded"></div>
                                </div>
                            </div>
                            <p class="text-gray-500">Select a widget from the sidebar to get started</p>
                        </div>
                    </div>
                    <div id="widgetCanvas" class="widget-grid hidden"></div>
                </div>
            </div>

            <!-- Members Screen -->
            <div id="membersScreen" class="screen flex-1 hidden">
                <div class="bg-white border-b border-gray-200 px-8 py-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <h1 class="section-title">Team Members</h1>
                            <p class="text-gray-600 mt-1">Manage your team and their permissions</p>
                        </div>
                        <button class="invite-member-btn flex items-center gap-2 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors">
                            <i class="fas fa-plus w-4"></i>
                            Invite Member
                        </button>
                    </div>
                </div>

                <div class="p-8">
                    <div class="flex items-center gap-4 mb-6">
                        <div class="relative flex-1 max-w-md">
                            <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4"></i>
                            <input
                                type="text"
                                placeholder="Search members..."
                                class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500"
                            />
                        </div>
                        <select class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                            <option>All Roles</option>
                            <option>Admin</option>
                            <option>Editor</option>
                            <option>Viewer</option>
                        </select>
                    </div>

                    <div class="bg-white rounded-lg border border-gray-200 overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
                            <div class="grid grid-cols-12 gap-4 text-xs font-medium text-gray-500 uppercase tracking-wider">
                                <div class="col-span-4">Member</div>
                                <div class="col-span-2">Role</div>
                                <div class="col-span-2">Status</div>
                                <div class="col-span-3">Last Active</div>
                                <div class="col-span-1">Actions</div>
                            </div>
                        </div>
                        <div class="divide-y divide-gray-200" id="membersList">
                            <!-- Members will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Screen -->
            <div id="settingsScreen" class="screen flex-1 hidden">
                <div class="bg-white border-b border-gray-200 px-8 py-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <h1 class="section-title">Settings</h1>
                            <p class="text-gray-600 mt-1">Manage your dashboard preferences</p>
                        </div>
                        <button class="save-changes-btn flex items-center gap-2 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors">
                            <i class="fas fa-save w-4"></i>
                            Save Changes
                        </button>
                    </div>
                </div>

                <div class="flex-1 flex">
                    <div class="w-64 bg-white border-r border-gray-200 p-6">
                        <nav class="space-y-1" id="settingsTabs">
                            <button data-tab="general" class="settings-tab w-full flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors bg-teal-50 text-teal-700 border border-teal-200">
                                <i class="fas fa-globe w-4"></i>
                                General
                            </button>
                            <button data-tab="notifications" class="settings-tab w-full flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors text-gray-600 hover:bg-gray-50">
                                <i class="fas fa-bell w-4"></i>
                                Notifications
                            </button>
                            <button data-tab="security" class="settings-tab w-full flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors text-gray-600 hover:bg-gray-50">
                                <i class="fas fa-shield-alt w-4"></i>
                                Security
                            </button>
                            <button data-tab="appearance" class="settings-tab w-full flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors text-gray-600 hover:bg-gray-50">
                                <i class="fas fa-palette w-4"></i>
                                Appearance
                            </button>
                        </nav>
                    </div>

                    <div class="flex-1 p-8">
                        <div class="max-w-2xl">
                            <div class="bg-white rounded-lg border border-gray-200 p-6" id="settingsContent">
                                <!-- Settings content will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Screen -->
            <div id="analyticsScreen" class="screen flex-1 hidden">
                <div class="bg-white border-b border-gray-200 px-8 py-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <h1 class="section-title">Analytics</h1>
                            <p class="text-gray-600 mt-1">Track your dashboard performance and usage</p>
                        </div>
                        <select class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                            <option>Last 7 days</option>
                            <option>Last 30 days</option>
                            <option>Last 90 days</option>
                        </select>
                    </div>
                </div>

                <div class="p-8">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8" id="metricsCards">
                        <!-- Metrics cards will be populated by JavaScript -->
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-2 bg-white rounded-lg border border-gray-200 p-6">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-lg font-medium text-gray-900">Views & Users Over Time</h3>
                                <div class="flex items-center gap-4 text-sm">
                                    <div class="flex items-center gap-2">
                                        <div class="w-3 h-3 bg-teal-500 rounded-full"></div>
                                        <span class="text-gray-600">Views</span>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                                        <span class="text-gray-600">Users</span>
                                    </div>
                                </div>
                            </div>
                            <canvas id="analyticsChart" width="400" height="200"></canvas>
                        </div>

                        <div class="bg-white rounded-lg border border-gray-200 p-6">
                            <h3 class="text-lg font-medium text-gray-900 mb-6">Top Performing Widgets</h3>
                            <div class="space-y-4" id="topWidgets">
                                <!-- Top widgets will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Transaction Monitoring Screen -->
                <div id="transactionScreen" class="screen hidden">
                    <!-- Loading state - will be replaced by JavaScript -->
                    <div class="flex items-center justify-center h-full">
                        <div class="text-center">
                            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600 mx-auto mb-4"></div>
                            <p class="text-gray-600">Loading Transaction Monitoring...</p>
                        </div>
                    </div>
                </div>

            
        </div>
    </div>

    <!-- Hidden File Input for Import -->
    <input type="file" id="importFileInput" accept=".json" style="display: none;">

    <!-- Add Toggle Switch Styles -->
    <style>
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #0d9488;
        }

        input:checked + .slider:before {
            transform: translateX(20px);
        }

        .dotted-background {
            background-image: radial-gradient(circle, #d1d5db 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .widget-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .sidebar-title, .sidebar-text, .sidebar-section-title, .sidebar-description {
            transition: opacity 0.3s ease;
        }

        .section-title-container {
            display: flex;
            items-center: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }

        @media (max-width: 768px) {
            .section-title-container {
                flex-direction: column;
                align-items: flex-start;
            }

            .section-title-container > div {
                flex-wrap: wrap;
                gap: 0.5rem;
            }
        }
    </style>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script type="module">
        // Initialize application when DOM is loaded
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // Import all modules with error handling
                const modules = await Promise.allSettled([
                    import('./src/core/DashboardApp.js'),
                    import('./src/widgets/WidgetRenderer.js'),
                    import('./src/charts/ChartRenderer.js'),
                    import('./src/data/DataManager.js'),
                    import('./src/members/MembersManager.js'),
                    import('./src/settings/SettingsManager.js'),
                    import('./src/analytics/AnalyticsManager.js'),
                    import('./src/utils/NavigationManager.js')
                ]);

                // Check for any failed imports
                const failedImports = modules.filter(result => result.status === 'rejected');
                if (failedImports.length > 0) {
                    console.warn('Some modules failed to load:', failedImports);
                }

                // Extract successful imports
                const [
                    dashboardAppModule,
                    widgetRendererModule,
                    chartRendererModule,
                    dataManagerModule,
                    membersManagerModule,
                    settingsManagerModule,
                    analyticsManagerModule,
                    navigationManagerModule
                ] = modules.map(result => result.status === 'fulfilled' ? result.value : null);

                // Initialize managers with fallbacks
                if (navigationManagerModule?.NavigationManager) {
                    window.navigationManager = new navigationManagerModule.NavigationManager();
                }

                if (chartRendererModule?.ChartRenderer) {
                    window.chartRenderer = new chartRendererModule.ChartRenderer();
                }

                if (dataManagerModule?.DataManager) {
                    window.dataManager = new dataManagerModule.DataManager();
                }

                if (membersManagerModule?.MembersManager) {
                    window.membersManager = new membersManagerModule.MembersManager();
                }

                if (settingsManagerModule?.SettingsManager) {
                    window.settingsManager = new settingsManagerModule.SettingsManager();
                }

                if (analyticsManagerModule?.AnalyticsManager) {
                    window.analyticsManager = new analyticsManagerModule.AnalyticsManager();
                }

                // Initialize the main application
                if (dashboardAppModule?.DashboardApp) {
                    window.dashboardApp = new dashboardAppModule.DashboardApp();

                    if (widgetRendererModule?.WidgetRenderer) {
                        window.widgetRenderer = new widgetRendererModule.WidgetRenderer(window.dashboardApp);
                        window.dashboardApp.widgetRenderer = window.widgetRenderer;
                    }
                } else {
                    console.error('Failed to load DashboardApp module');
                }

            } catch (error) {
                console.error('Failed to initialize application:', error);
                // Show fallback UI or error message
                document.body.innerHTML = `
                    <div class="flex items-center justify-center h-screen bg-gray-50">
                        <div class="text-center">
                            <div class="w-16 h-16 bg-red-100 rounded-lg mx-auto mb-4 flex items-center justify-center">
                                <i class="fas fa-exclamation-triangle text-red-600 text-xl"></i>
                            </div>
                            <h2 class="text-lg font-medium text-gray-900 mb-2">Application Failed to Load</h2>
                            <p class="text-gray-600 mb-4">Please check the console for more details.</p>
                            <button onclick="location.reload()" class="px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors">
                                Reload Page
                            </button>
                        </div>
                    </div>
                `;
            }
        });

        // Sidebar collapse functionality with error handling
        function initializeSidebarCollapse() {
            try {
                const sidebar = document.getElementById('sidebar');
                const collapseButton = document.getElementById('collapseSidebarBtn');

                if (!sidebar || !collapseButton) {
                    console.warn('Sidebar elements not found');
                    return;
                }

                const sidebarTexts = sidebar.querySelectorAll('.sidebar-text, .sidebar-section-title, .sidebar-description');
                const sidebarTitle = sidebar.querySelector('.sidebar-title');
                const searchInput = sidebar.querySelector('input[type="text"]');
                const searchIcon = sidebar.querySelector('.fa-search');
                const commandK = sidebar.querySelector('span.absolute');
                const footerLogoText = sidebar.querySelector('.font-medium');

                let isCollapsed = false;

                collapseButton.addEventListener('click', () => {
                    isCollapsed = !isCollapsed;

                    const collapseIcon = collapseButton.querySelector('i');

                    if (isCollapsed) {
                        sidebar.classList.remove('w-64');
                        sidebar.classList.add('w-16');
                        if (collapseIcon) collapseIcon.classList.add('rotate-90');
                        sidebarTexts.forEach(el => el.classList.add('hidden'));
                        if (sidebarTitle) sidebarTitle.classList.add('hidden');
                        if (searchInput) searchInput.classList.add('hidden');
                        if (searchIcon) searchIcon.classList.add('hidden');
                        if (commandK) commandK.classList.add('hidden');
                        if (footerLogoText) footerLogoText.classList.add('hidden');
                        sidebar.classList.add('items-center');
                    } else {
                        sidebar.classList.remove('w-16');
                        sidebar.classList.add('w-64');
                        if (collapseIcon) collapseIcon.classList.remove('rotate-90');
                        sidebarTexts.forEach(el => el.classList.remove('hidden'));
                        if (sidebarTitle) sidebarTitle.classList.remove('hidden');
                        if (searchInput) searchInput.classList.remove('hidden');
                        if (searchIcon) searchIcon.classList.remove('hidden');
                        if (commandK) commandK.classList.remove('hidden');
                        if (footerLogoText) footerLogoText.classList.remove('hidden');
                        sidebar.classList.remove('items-center');
                    }
                });
            } catch (error) {
                console.error('Failed to initialize sidebar collapse:', error);
            }
        }

        // Initialize sidebar after DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeSidebarCollapse);
   
   
        // Transaction Monitoring functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize transaction monitoring when needed
            if (!window.transactionMonitoringScreen) {
                window.transactionMonitoringScreen = {
                    // Copy the complete JavaScript object from the artifact above
                };
            }
        });

        // Update your existing navigation button listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Enhanced navigation handling
            const navButtons = document.querySelectorAll('.nav-btn');
            
            // Copy the navigation handling code from the artifact above
        });
   
   
   
   </script>
</body>
</html>